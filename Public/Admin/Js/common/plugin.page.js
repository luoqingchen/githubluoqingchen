jQuery.fn.pagination=function(a,b){b=jQuery.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,callback:function(){return !1}},b||{});return this.each(function(){function d(){var c=b.num_display_entries%2,d=Math.ceil(b.num_display_entries/2),f=Math.ceil(a/b.items_per_page),n=f-b.num_display_entries,c=g>d?Math.max(Math.min(g-d+c,n),0):0,d=g>d?Math.min(g+d,f):Math.min(b.num_display_entries,f);return[c,d]}function c(a,c){g=a;var d=b.callback(a,n);d?f():c.stopPropagation?c.stopPropagation():c.cancelBubble=!0;return d}function f(){n.empty();var f=d(),k=Math.ceil(a/b.items_per_page),s=function(a){return function(b){return c(a,b)}},v=function(a,c){var d=null;a=0>a?0:a<k?a:k-1;c=jQuery.extend({text:a+1,classes:""},c||{});a==g?(""==c.classes&&(c.classes="page-current"),d=jQuery("<span class='cell "+c.classes+"'>"+c.text+"</span>")):(""==c.classes&&(c.classes="page"),d=jQuery("<a class='cell "+c.classes+"'>"+c.text+"</a>").bind("click",s(a)).attr("href",b.link_to.replace(/__id__/,a)));n.append(d)};b.prev_text&&(0<g||b.prev_show_always)&&v(g-1,{text:b.prev_text,classes:"page-prev"});if(0<f[0]&&0<b.num_edge_entries){for(var M=Math.min(b.num_edge_entries,f[0]),z=0;z<M;z++){v(z)}b.num_edge_entries<f[0]&&b.ellipse_text&&jQuery("<span class='cell'>"+b.ellipse_text+"</span>").appendTo(n)}for(z=f[0];z<f[1];z++){v(z)}if(f[1]<k&&0<b.num_edge_entries){for(k-b.num_edge_entries>f[1]&&b.ellipse_text&&jQuery("<span class='cell'>"+b.ellipse_text+"</span>").appendTo(n),z=Math.max(k-b.num_edge_entries,f[1]);z<k;z++){v(z)}}b.next_text&&(g<k-1||b.next_show_always)&&v(g+1,{text:b.next_text,classes:"page-next"})}var g=b.current_page;a=!a||0>a?1:a;b.items_per_page=!b.items_per_page||0>b.items_per_page?1:b.items_per_page;var n=jQuery(this);this.selectPage=function(a){c(a)};this.prevPage=function(){return 0<g?(c(g-1),!0):!1};this.nextPage=function(){return g<Math.ceil(a/b.items_per_page)-1?(c(g+1),!0):!1};f()})};